diff -urN dsniff-2.4.org/configure.in dsniff-2.4/configure.in
--- dsniff-2.4.org/configure.in	2003-11-08 22:37:23.000000000 +0100
+++ dsniff-2.4/configure.in	2003-11-08 22:38:34.000000000 +0100
@@ -61,17 +61,17 @@
 needmd5=no
 AC_CHECK_FUNCS(MD5Update, , [needmd5=yes])
 if test $needmd5 = yes; then
-   LIBOBJS="$LIBOBJS md5.o"
+   AC_LIBOBJ([md5])
 fi
 neederr=no
 AC_CHECK_FUNCS(warnx, , [neederr=yes])
 if test $neederr = yes; then
-   LIBOBJS="$LIBOBJS err.o"
+   AC_LIBOBJ([err])
 fi
 needethers=no
 AC_CHECK_FUNCS(ether_ntoa, , [needethers=yes])
 if test $needethers = yes; then
-   LIBOBJS="$LIBOBJS ethers.o"
+   AC_LIBOBJ([ethers])
 fi
 
 dnl Checks for BSD tunnel device
diff -urN dsniff-2.4.org/configure.in dsniff-2.4/configure.in
--- dsniff-2.4.org/configure.in	2004-08-07 03:19:02.859637600 +0200
+++ dsniff-2.4/configure.in	2004-08-07 03:20:07.888751672 +0200
@@ -56,7 +56,7 @@
 AC_CHECK_LIB(socket, socket)
 AC_CHECK_LIB(nsl, gethostbyname)
 dnl XXX - feh, everything except OpenBSD sux.
-AC_CHECK_LIB(resolv, dn_expand)
+AC_CHECK_LIB(resolv, dn_expand, , [AC_CHECK_LIB(resolv, __dn_expand)])
 AC_REPLACE_FUNCS(dirname strlcpy strlcat strsep)
 needmd5=no
 AC_CHECK_FUNCS(MD5Update, , [needmd5=yes])
